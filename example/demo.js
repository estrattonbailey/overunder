(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _index = require('../package/index.js');

var _index2 = _interopRequireDefault(_index);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var scroller = _index2.default.scroll(document.getElementById('target'), {
  watchResize: true
});

window.scroller = scroller;

scroller.on('under', function () {
  return console.log('under');
});
scroller.on('between', function () {
  return console.log('between');
});
scroller.on('over', function () {
  return console.log('over');
});

scroller.update({
  offset: 200
}).check();

var viewport = window.innerHeight;
// window.addEventListener('scroll', e => console.log(window.scrollY))

},{"../package/index.js":2}],2:[function(require,module,exports){
'use strict';var _createClass=function(){function b(c,d){for(var f,e=0;e<d.length;e++)f=d[e],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}return function(c,d,e){return d&&b(c.prototype,d),e&&b(c,e),c}}(),_typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&'function'==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?'symbol':typeof b},_srraf=require('srraf'),_srraf2=_interopRequireDefault(_srraf),_loop=require('loop.js'),_loop2=_interopRequireDefault(_loop);Object.defineProperty(exports,'__esModule',{value:!0});function _interopRequireDefault(b){return b&&b.__esModule?b:{default:b}}function _classCallCheck(b,c){if(!(b instanceof c))throw new TypeError('Cannot call a class as a function')}var isObj=function(b){return null!==b&&'object'===('undefined'==typeof b?'undefined':_typeof(b))&&!('nodeType'in b)},merge=function(b){for(var d=arguments.length,c=Array(1<d?d-1:0),e=1;e<d;e++)c[e-1]=arguments[e];return c.reduce(function(f,g){return Object.keys(g).forEach(function(h){f[h]=g[h]}),f},b)},mergeOptions=function(b,c){isObj(c)?merge(b.config,c):b.range=c},getDimensions=function(b,c){return b.window?Math.max(b['inner'+c],b['outer'+c],document.documentElement['client'+c]):Math.max(b['offset'+c],b['client'+c])},Overunder=function(){function b(h,j){var p=this;_classCallCheck(this,b),this.config={type:h,context:window,offset:0,negativeOffset:0,watchResize:!1,paused:!1},this.delta=j,merge(this,(0,_loop2.default)());for(var m=arguments.length,l=Array(2<m?m-2:0),n=2;n<m;n++)l[n-2]=arguments[n];l.forEach(function(q){return q?mergeOptions(p,q):null}),this.listener=this.config.watchResize?_srraf2.default.use(function(_ref){var q=_ref.currY,r=_ref.prevY,s=_ref.currX,t=p.config.context?getDimensions(p.config.context):s;p.currentPosition='scroll'===p.config.type?q:t,p.checkPosition()}).update():_srraf2.default[this.config.type].use(function(_ref2){var q=_ref2.curr;p.currentPosition='resize'===p.config.type?getDimensions(p.config.context,'Width'):q,p.checkPosition()}).update()}return _createClass(b,[{key:'destroy',value:function destroy(){this.listener.destroy()}},{key:'update',value:function update(){var n=this,m=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;m&&(isObj(m)?mergeOptions(this,m):this.delta=m);for(var j=arguments.length,h=Array(1<j?j-1:0),l=1;l<j;l++)h[l-1]=arguments[l];return h.forEach(function(p){return p?mergeOptions(n,p):null}),this}},{key:'check',value:function check(){return this.checkPosition(!0),this}},{key:'checkPosition',value:function checkPosition(){var h=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(!this.config.paused){var j=this.delta,l=this.range;'object'===_typeof(this.delta)&&(j='scroll'===this.config.type?j.getBoundingClientRect().top+this.currentPosition:getDimensions(this.delta,'Width')),'object'===_typeof(this.range)&&(l='scroll'===this.config.type?this.range.getBoundingClientRect().top+this.currentPosition:getDimensions(this.range,'Width')||!1);var m=this.config.offset||null,n=this.config.negativeOffset||null;m&&'object'===('undefined'==typeof m?'undefined':_typeof(m))&&(m=getDimensions(m,'scroll'===this.config.type?'Height':'Width')),n&&'object'===('undefined'==typeof n?'undefined':_typeof(n))&&(n=getDimensions(n,'scroll'===this.config.type?'Height':'Width'));var p=window.innerHeight;j=j-p-m+n,l=!!l&&l-p-m+n;var q='under'!==this.position,r='over'!==this.position,s='between'!==this.position,t=this.currentPosition<j,u=this.currentPosition>=j,v=this.currentPosition<l,w=this.currentPosition>=l,y=l?w&&r:u&&r,z=l&&u&&v&&s,B=l?w&&h:u&&h,C=l&&u&&v&&h;t&&q||t&&h?(this.position='under',this.emit(this.position,this)):z||C?(this.position='between',this.emit(this.position,this)):(y||B)&&(this.position='over',this.emit(this.position,this))}}}]),b}();exports.default={scroll:function scroll(b,c,d){return new Overunder('scroll',b,c,d)},resize:function resize(b,c,d){return new Overunder('resize',b,c,d)}};

},{"loop.js":3,"srraf":4}],3:[function(require,module,exports){
"use strict";var _extends=Object.assign||function(e){for(var i,k=1;k<arguments.length;k++)for(var l in i=arguments[k],i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l]);return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i={};return _extends({},e,{emit:function(l){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=!!i[l]&&i[l].queue;n&&n.forEach(function(o){return o(m)})},on:function(l){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;m&&(i[l]=i[l]||{queue:[]},i[l].queue.push(m))}})};

},{}],4:[function(require,module,exports){
'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(exports,'__esModule',{value:!0});function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var scrollInstance=null,resizeInstance=null,Listener=function(){function a(b){_classCallCheck(this,a),this.type=b,this.pool=0,this.queue=[],this.curr=this.position(),this.prev=this.position(),this.ticking=!1,window.addEventListener(b,this.requestFrame.bind(this))}return _createClass(a,[{key:'position',value:function position(){return'scroll'===this.type?window.scrollY||window.pageYOffset:window.innerWidth}},{key:'requestFrame',value:function requestFrame(b){this.e=b,this.curr=this.position(),this.ticking||(window.requestAnimationFrame(this.run.bind(this)),this.ticking=!0)}},{key:'run',value:function run(){var b=this;this.queue.forEach(function(c){return c[1]({curr:b.curr,prev:b.prev},b.e)}),this.prev=this.curr,this.ticking=!1}},{key:'use',value:function use(b){var c=this,d=c.pool++;return c.queue.push([d,b]),{destroy:function destroy(){return c.queue.forEach(function(f,g){f[0]===d&&c.queue.splice(g,1)}),this},update:function update(){return b({curr:c.curr,prev:c.prev},c.e),this}}}},{key:'update',value:function update(){this.run()}}]),a}();exports.default='undefined'==typeof window?null:{get scroll(){return scrollInstance||(scrollInstance=new Listener('scroll')),scrollInstance},get resize(){return resizeInstance||(resizeInstance=new Listener('resize')),resizeInstance},use:function use(a){var _scroll=this.scroll,b=_scroll.curr,c=_scroll.prev,_resize=this.resize,d=_resize.curr,f=_resize.prev,g={currY:b,prevY:c,currX:d,prevX:f},h=this.scroll.use(function(_ref,m){var k=_ref.curr,l=_ref.prev;g.currY=k,g.prevY=l,a(g,m)}),j=this.resize.use(function(_ref2,m){var k=_ref2.curr,l=_ref2.prev;g.currX=k,g.prevX=l,a(g,m)});return{destroy:function destroy(){return h.destroy(),j.destroy(),this},update:function update(){return h.update(),j.update(),this}}}};
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsIi4uL3BhY2thZ2UvaW5kZXguanMiLCIuLi9wYWNrYWdlL25vZGVfbW9kdWxlcy9sb29wLmpzL2Rpc3QvaW5kZXguanMiLCIuLi9wYWNrYWdlL25vZGVfbW9kdWxlcy9zcnJhZi9kaXN0L2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7Ozs7O0FBRUEsSUFBTSxXQUFXLGdCQUFVLE1BQVYsQ0FBaUIsU0FBUyxjQUFULENBQXdCLFFBQXhCLENBQWpCLEVBQW9EO0FBQ25FLGVBQWE7QUFEc0QsQ0FBcEQsQ0FBakI7O0FBSUEsT0FBTyxRQUFQLEdBQWtCLFFBQWxCOztBQUVBLFNBQVMsRUFBVCxDQUFZLE9BQVosRUFBcUI7QUFBQSxTQUFNLFFBQVEsR0FBUixDQUFZLE9BQVosQ0FBTjtBQUFBLENBQXJCO0FBQ0EsU0FBUyxFQUFULENBQVksU0FBWixFQUF1QjtBQUFBLFNBQU0sUUFBUSxHQUFSLENBQVksU0FBWixDQUFOO0FBQUEsQ0FBdkI7QUFDQSxTQUFTLEVBQVQsQ0FBWSxNQUFaLEVBQW9CO0FBQUEsU0FBTSxRQUFRLEdBQVIsQ0FBWSxNQUFaLENBQU47QUFBQSxDQUFwQjs7QUFFQSxTQUFTLE1BQVQsQ0FBZ0I7QUFDZCxVQUFRO0FBRE0sQ0FBaEIsRUFFRyxLQUZIOztBQUlBLElBQU0sV0FBVyxPQUFPLFdBQXhCO0FBQ0E7Ozt1MEJDZEEsR0FBTSxPQUFRLGtCQUFXLEtBQU4sTUFBMkIsUUFBYix1QkFBTyxFQUFQLHFCQUFPLENBQVAsRUFBZCxFQUF1QyxFQUFFLFlBQWMsRUFBaEIsQ0FBNUMsQ0FBZCxDQUVNLE1BQVEsU0FBQyxDQUFELDZCQUFZLENBQVosOEJBQVksQ0FBWix5QkFBcUIsR0FBSyxNQUFMLENBQVksU0FBQyxDQUFELENBQVMsQ0FBVCxDQUFpQixDQUU5RCxNQURBLFFBQU8sSUFBUCxDQUFZLENBQVosRUFBaUIs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Q0FBVyxJQUFYLENBQWdCLENBQWhCLENBQTFCLENBQThDLENBQXBSLENBQWQsQ0FBcVMsQzs7O0FDQTVuQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgb3ZlcnVuZGVyIGZyb20gJy4uL3BhY2thZ2UvaW5kZXguanMnXG5cbmNvbnN0IHNjcm9sbGVyID0gb3ZlcnVuZGVyLnNjcm9sbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFyZ2V0JyksIHtcbiAgd2F0Y2hSZXNpemU6IHRydWUsXG59KVxuXG53aW5kb3cuc2Nyb2xsZXIgPSBzY3JvbGxlclxuXG5zY3JvbGxlci5vbigndW5kZXInLCAoKSA9PiBjb25zb2xlLmxvZygndW5kZXInKSlcbnNjcm9sbGVyLm9uKCdiZXR3ZWVuJywgKCkgPT4gY29uc29sZS5sb2coJ2JldHdlZW4nKSlcbnNjcm9sbGVyLm9uKCdvdmVyJywgKCkgPT4gY29uc29sZS5sb2coJ292ZXInKSlcblxuc2Nyb2xsZXIudXBkYXRlKHtcbiAgb2Zmc2V0OiAyMDAsXG59KS5jaGVjaygpXG5cbmNvbnN0IHZpZXdwb3J0ID0gd2luZG93LmlubmVySGVpZ2h0XG4vLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZSA9PiBjb25zb2xlLmxvZyh3aW5kb3cuc2Nyb2xsWSkpXG4iLCJpbXBvcnQgc3JyYWYgZnJvbSAnc3JyYWYnXG5pbXBvcnQgbG9vcCBmcm9tICdsb29wLmpzJ1xuXG5jb25zdCBpc09iaiA9IG8gPT4gbyAhPT0gbnVsbCAmJiB0eXBlb2YgbyA9PT0gJ29iamVjdCcgJiYgISgnbm9kZVR5cGUnIGluIG8pXG5cbmNvbnN0IG1lcmdlID0gKHRhcmdldCwgLi4uYXJncykgPT4gYXJncy5yZWR1Y2UoKHRhcmdldCwgYXJnKSA9PiB7XG4gIE9iamVjdC5rZXlzKGFyZykuZm9yRWFjaChrID0+IHsgdGFyZ2V0W2tdID0gYXJnW2tdIH0pXG4gIHJldHVybiB0YXJnZXRcbn0sIHRhcmdldClcblxuY29uc3QgbWVyZ2VPcHRpb25zID0gKHRhcmdldCwgcHJvcCkgPT4ge1xuICBpc09iaihwcm9wKSA/IG1lcmdlKHRhcmdldC5jb25maWcsIHByb3ApIDogdGFyZ2V0WydyYW5nZSddID0gcHJvcFxufVxuXG5jb25zdCBnZXREaW1lbnNpb25zID0gKGVsLCB0eXBlKSA9PiBlbC53aW5kb3cgPyAoXG4gIE1hdGgubWF4KGVsW2Bpbm5lciR7dHlwZX1gXSwgZWxbYG91dGVyJHt0eXBlfWBdLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbYGNsaWVudCR7dHlwZX1gXSlcbikgOiAoXG4gIE1hdGgubWF4KGVsW2BvZmZzZXQke3R5cGV9YF0sIGVsW2BjbGllbnQke3R5cGV9YF0pXG4pXG5cbmNsYXNzIE92ZXJ1bmRlciB7XG4gIGNvbnN0cnVjdG9yICh0eXBlLCBkZWx0YSwgLi4uYXJncykge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGNvbnRleHQ6IHdpbmRvdyxcbiAgICAgIG9mZnNldDogMCxcbiAgICAgIG5lZ2F0aXZlT2Zmc2V0OiAwLFxuICAgICAgd2F0Y2hSZXNpemU6IGZhbHNlLFxuICAgICAgcGF1c2VkOiBmYWxzZVxuICAgIH1cblxuICAgIHRoaXMuZGVsdGEgPSBkZWx0YVxuXG4gICAgbWVyZ2UodGhpcywgbG9vcCgpKVxuXG4gICAgYXJncy5mb3JFYWNoKGEgPT4gYSA/IG1lcmdlT3B0aW9ucyh0aGlzLCBhKSA6IG51bGwpXG5cbiAgICBpZiAodGhpcy5jb25maWcud2F0Y2hSZXNpemUpIHtcbiAgICAgIHRoaXMubGlzdGVuZXIgPSBzcnJhZi51c2UoKHsgY3VyclksIHByZXZZLCBjdXJyWCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5jb25maWcuY29udGV4dCA/IChcbiAgICAgICAgICBnZXREaW1lbnNpb25zKHRoaXMuY29uZmlnLmNvbnRleHQpXG4gICAgICAgICkgOiBjdXJyWFxuXG4gICAgICAgIHRoaXMuY3VycmVudFBvc2l0aW9uID0gdGhpcy5jb25maWcudHlwZSA9PT0gJ3Njcm9sbCcgPyBjdXJyWSA6IHdpZHRoXG5cbiAgICAgICAgdGhpcy5jaGVja1Bvc2l0aW9uKClcbiAgICAgIH0pLnVwZGF0ZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGlzdGVuZXIgPSBzcnJhZlt0aGlzLmNvbmZpZy50eXBlXS51c2UoKHsgY3VyciB9KSA9PiB7XG4gICAgICAgIHRoaXMuY3VycmVudFBvc2l0aW9uID0gdGhpcy5jb25maWcudHlwZSA9PT0gJ3Jlc2l6ZScgPyAoXG4gICAgICAgICAgZ2V0RGltZW5zaW9ucyh0aGlzLmNvbmZpZy5jb250ZXh0LCAnV2lkdGgnKVxuICAgICAgICApIDogY3VyclxuXG4gICAgICAgIHRoaXMuY2hlY2tQb3NpdGlvbigpXG4gICAgICB9KS51cGRhdGUoKVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3kgKCkge1xuICAgIHRoaXMubGlzdGVuZXIuZGVzdHJveSgpXG4gIH1cblxuICB1cGRhdGUgKGRlbHRhID0gbnVsbCwgLi4uYXJncykge1xuICAgIC8qKlxuICAgICAqIGRlbHRhIHBhcmFtIGNvdWxkIGJlIG9iaiBvclxuICAgICAqIGp1c3QgYSBkZWx0YSB2YWx1ZVxuICAgICAqL1xuICAgIGlmIChkZWx0YSkge1xuICAgICAgaXNPYmooZGVsdGEpID8gbWVyZ2VPcHRpb25zKHRoaXMsIGRlbHRhKSA6IHRoaXMuZGVsdGEgPSBkZWx0YVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBvcHRpb25hbCBwcm9wcyB0byBpbnN0YW5jZSBvYmplY3RcbiAgICAgKi9cbiAgICBhcmdzLmZvckVhY2goYSA9PiBhID8gbWVyZ2VPcHRpb25zKHRoaXMsIGEpIDogbnVsbClcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBjaGVjayAoKSB7XG4gICAgdGhpcy5jaGVja1Bvc2l0aW9uKHRydWUpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGNoZWNrUG9zaXRpb24gKGZvcmNlID0gZmFsc2UpIHtcbiAgICBpZiAodGhpcy5jb25maWcucGF1c2VkKSByZXR1cm5cblxuICAgIC8qKlxuICAgICAqIERlbHRhIGFuZCByYW5nZSB2YWx1ZXNcbiAgICAgKi9cbiAgICBsZXQgZGVsdGEgPSB0aGlzLmRlbHRhXG4gICAgbGV0IHJhbmdlID0gdGhpcy5yYW5nZVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmRlbHRhID09PSAnb2JqZWN0Jykge1xuICAgICAgZGVsdGEgPSB0aGlzLmNvbmZpZy50eXBlID09PSAnc2Nyb2xsJyA/IChcbiAgICAgICAgZGVsdGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgdGhpcy5jdXJyZW50UG9zaXRpb25cbiAgICAgICkgOiAoXG4gICAgICAgIGdldERpbWVuc2lvbnModGhpcy5kZWx0YSwgJ1dpZHRoJylcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMucmFuZ2UgPT09ICdvYmplY3QnKSB7XG4gICAgICByYW5nZSA9IHRoaXMuY29uZmlnLnR5cGUgPT09ICdzY3JvbGwnID8gKFxuICAgICAgICB0aGlzLnJhbmdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHRoaXMuY3VycmVudFBvc2l0aW9uXG4gICAgICApIDogKFxuICAgICAgICBnZXREaW1lbnNpb25zKHRoaXMucmFuZ2UsICdXaWR0aCcpIHx8IGZhbHNlXG4gICAgICApXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT2Zmc2V0IHZhbHVlc1xuICAgICAqL1xuICAgIGxldCBvZmZzZXQgPSB0aGlzLmNvbmZpZy5vZmZzZXQgfHwgbnVsbFxuICAgIGxldCBuZWdhdGl2ZU9mZnNldCA9IHRoaXMuY29uZmlnLm5lZ2F0aXZlT2Zmc2V0IHx8IG51bGxcblxuICAgIGlmIChvZmZzZXQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG9mZnNldCA9IGdldERpbWVuc2lvbnMob2Zmc2V0LCB0aGlzLmNvbmZpZy50eXBlID09PSAnc2Nyb2xsJyA/ICdIZWlnaHQnIDogJ1dpZHRoJylcbiAgICB9XG5cbiAgICBpZiAobmVnYXRpdmVPZmZzZXQgJiYgdHlwZW9mIG5lZ2F0aXZlT2Zmc2V0ID09PSAnb2JqZWN0Jykge1xuICAgICAgbmVnYXRpdmVPZmZzZXQgPSBnZXREaW1lbnNpb25zKG5lZ2F0aXZlT2Zmc2V0LCB0aGlzLmNvbmZpZy50eXBlID09PSAnc2Nyb2xsJyA/ICdIZWlnaHQnIDogJ1dpZHRoJylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgZmluYWwgZGVsdGEgYW5kIHJhbmdlIHZhbHVlc1xuICAgICAqL1xuICAgIGNvbnN0IHZpZXdwb3J0ID0gd2luZG93LmlubmVySGVpZ2h0XG4gICAgZGVsdGEgPSAoZGVsdGEgLSB2aWV3cG9ydCkgLSBvZmZzZXQgKyBuZWdhdGl2ZU9mZnNldFxuICAgIHJhbmdlID0gcmFuZ2UgPyAocmFuZ2UgLSB2aWV3cG9ydCkgLSBvZmZzZXQgKyBuZWdhdGl2ZU9mZnNldCA6IGZhbHNlXG5cbiAgICAvKipcbiAgICAgKiBCb29sZWFuc1xuICAgICAqL1xuICAgIGNvbnN0IG5vdFVuZGVyID0gdGhpcy5wb3NpdGlvbiAhPT0gJ3VuZGVyJ1xuICAgIGNvbnN0IG5vdE92ZXIgPSB0aGlzLnBvc2l0aW9uICE9PSAnb3ZlcidcbiAgICBjb25zdCBub3RCZXR3ZWVuID0gdGhpcy5wb3NpdGlvbiAhPT0gJ2JldHdlZW4nXG5cbiAgICBjb25zdCB1bmRlckRlbHRhID0gdGhpcy5jdXJyZW50UG9zaXRpb24gPCBkZWx0YVxuICAgIGNvbnN0IG92ZXJEZWx0YSA9IHRoaXMuY3VycmVudFBvc2l0aW9uID49IGRlbHRhXG5cbiAgICBjb25zdCB1bmRlclJhbmdlID0gdGhpcy5jdXJyZW50UG9zaXRpb24gPCByYW5nZVxuICAgIGNvbnN0IG92ZXJSYW5nZSA9IHRoaXMuY3VycmVudFBvc2l0aW9uID49IHJhbmdlXG5cbiAgICAvKipcbiAgICAgKiBGaW5hbCBib29sZWFuc1xuICAgICAqL1xuICAgIGNvbnN0IHVuZGVyID0gdW5kZXJEZWx0YSAmJiBub3RVbmRlclxuICAgIGNvbnN0IG92ZXIgPSByYW5nZSA/IG92ZXJSYW5nZSAmJiBub3RPdmVyIDogb3ZlckRlbHRhICYmIG5vdE92ZXJcbiAgICBjb25zdCBiZXR3ZWVuID0gcmFuZ2UgJiYgb3ZlckRlbHRhICYmIHVuZGVyUmFuZ2UgJiYgbm90QmV0d2VlblxuICAgIGNvbnN0IHVuZGVyRm9yY2UgPSB1bmRlckRlbHRhICYmIGZvcmNlXG4gICAgY29uc3Qgb3ZlckZvcmNlID0gcmFuZ2UgPyBvdmVyUmFuZ2UgJiYgZm9yY2UgOiBvdmVyRGVsdGEgJiYgZm9yY2VcbiAgICBjb25zdCBiZXR3ZWVuRm9yY2UgPSByYW5nZSAmJiBvdmVyRGVsdGEgJiYgdW5kZXJSYW5nZSAmJiBmb3JjZVxuXG4gICAgaWYgKHVuZGVyIHx8IHVuZGVyRm9yY2UpIHtcbiAgICAgIHRoaXMucG9zaXRpb24gPSAndW5kZXInXG4gICAgICB0aGlzLmVtaXQodGhpcy5wb3NpdGlvbiwgdGhpcylcbiAgICB9IGVsc2UgaWYgKGJldHdlZW4gfHwgYmV0d2VlbkZvcmNlKSB7XG4gICAgICB0aGlzLnBvc2l0aW9uID0gJ2JldHdlZW4nXG4gICAgICB0aGlzLmVtaXQodGhpcy5wb3NpdGlvbiwgdGhpcylcbiAgICB9IGVsc2UgaWYgKG92ZXIgfHwgb3ZlckZvcmNlKSB7XG4gICAgICB0aGlzLnBvc2l0aW9uID0gJ292ZXInXG4gICAgICB0aGlzLmVtaXQodGhpcy5wb3NpdGlvbiwgdGhpcylcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBzY3JvbGwgKGRlbHRhLCByYW5nZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgT3ZlcnVuZGVyKCdzY3JvbGwnLCBkZWx0YSwgcmFuZ2UsIG9wdGlvbnMpXG4gIH0sXG4gIHJlc2l6ZSAoZGVsdGEsIHJhbmdlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBPdmVydW5kZXIoJ3Jlc2l6ZScsIGRlbHRhLCByYW5nZSwgb3B0aW9ucylcbiAgfVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7dmFyIF9leHRlbmRzPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxiPTE7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKylmb3IodmFyIGQgaW4gYz1hcmd1bWVudHNbYl0sYylPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYyxkKSYmKGFbZF09Y1tkXSk7cmV0dXJuIGF9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2V4cG9ydHMuZGVmYXVsdD1mdW5jdGlvbigpe3ZhciBhPTA8YXJndW1lbnRzLmxlbmd0aCYmYXJndW1lbnRzWzBdIT09dm9pZCAwP2FyZ3VtZW50c1swXTp7fSxiPXt9O3JldHVybiBfZXh0ZW5kcyh7fSxhLHtlbWl0OmZ1bmN0aW9uIGQoZil7dmFyIGc9MTxhcmd1bWVudHMubGVuZ3RoJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOm51bGwsaD0hIWJbZl0mJmJbZl0ucXVldWU7aCYmaC5mb3JFYWNoKGZ1bmN0aW9uKGope3JldHVybiBqKGcpfSl9LG9uOmZ1bmN0aW9uIGMoZil7dmFyIGc9MTxhcmd1bWVudHMubGVuZ3RoJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOm51bGw7ZyYmKGJbZl09YltmXXx8e3F1ZXVlOltdfSxiW2ZdLnF1ZXVlLnB1c2goZykpfX0pfTsiLCIndXNlIHN0cmljdCc7dmFyIF9jcmVhdGVDbGFzcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYixjKXtmb3IodmFyIGYsZD0wO2Q8Yy5sZW5ndGg7ZCsrKWY9Y1tkXSxmLmVudW1lcmFibGU9Zi5lbnVtZXJhYmxlfHwhMSxmLmNvbmZpZ3VyYWJsZT0hMCwndmFsdWUnaW4gZiYmKGYud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShiLGYua2V5LGYpfXJldHVybiBmdW5jdGlvbihiLGMsZCl7cmV0dXJuIGMmJmEoYi5wcm90b3R5cGUsYyksZCYmYShiLGQpLGJ9fSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCdfX2VzTW9kdWxlJyx7dmFsdWU6ITB9KTtmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKX12YXIgc2Nyb2xsSW5zdGFuY2U9bnVsbCxyZXNpemVJbnN0YW5jZT1udWxsLExpc3RlbmVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyxhKSx0aGlzLnR5cGU9Yix0aGlzLnBvb2w9MCx0aGlzLnF1ZXVlPVtdLHRoaXMuY3Vycj10aGlzLnBvc2l0aW9uKCksdGhpcy5wcmV2PXRoaXMucG9zaXRpb24oKSx0aGlzLnRpY2tpbmc9ITEsd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYix0aGlzLnJlcXVlc3RGcmFtZS5iaW5kKHRoaXMpKX1yZXR1cm4gX2NyZWF0ZUNsYXNzKGEsW3trZXk6J3Bvc2l0aW9uJyx2YWx1ZTpmdW5jdGlvbiBwb3NpdGlvbigpe3JldHVybidzY3JvbGwnPT09dGhpcy50eXBlP3dpbmRvdy5zY3JvbGxZfHx3aW5kb3cucGFnZVlPZmZzZXQ6d2luZG93LmlubmVyV2lkdGh9fSx7a2V5OidyZXF1ZXN0RnJhbWUnLHZhbHVlOmZ1bmN0aW9uIHJlcXVlc3RGcmFtZShiKXt0aGlzLmU9Yix0aGlzLmN1cnI9dGhpcy5wb3NpdGlvbigpLHRoaXMudGlja2luZ3x8KHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5ydW4uYmluZCh0aGlzKSksdGhpcy50aWNraW5nPSEwKX19LHtrZXk6J3J1bicsdmFsdWU6ZnVuY3Rpb24gcnVuKCl7dmFyIGI9dGhpczt0aGlzLnF1ZXVlLmZvckVhY2goZnVuY3Rpb24oYyl7cmV0dXJuIGNbMV0oe2N1cnI6Yi5jdXJyLHByZXY6Yi5wcmV2fSxiLmUpfSksdGhpcy5wcmV2PXRoaXMuY3Vycix0aGlzLnRpY2tpbmc9ITF9fSx7a2V5Oid1c2UnLHZhbHVlOmZ1bmN0aW9uIHVzZShiKXt2YXIgYz10aGlzLGQ9Yy5wb29sKys7cmV0dXJuIGMucXVldWUucHVzaChbZCxiXSkse2Rlc3Ryb3k6ZnVuY3Rpb24gZGVzdHJveSgpe3JldHVybiBjLnF1ZXVlLmZvckVhY2goZnVuY3Rpb24oZixnKXtmWzBdPT09ZCYmYy5xdWV1ZS5zcGxpY2UoZywxKX0pLHRoaXN9LHVwZGF0ZTpmdW5jdGlvbiB1cGRhdGUoKXtyZXR1cm4gYih7Y3VycjpjLmN1cnIscHJldjpjLnByZXZ9LGMuZSksdGhpc319fX0se2tleTondXBkYXRlJyx2YWx1ZTpmdW5jdGlvbiB1cGRhdGUoKXt0aGlzLnJ1bigpfX1dKSxhfSgpO2V4cG9ydHMuZGVmYXVsdD0ndW5kZWZpbmVkJz09dHlwZW9mIHdpbmRvdz9udWxsOntnZXQgc2Nyb2xsKCl7cmV0dXJuIHNjcm9sbEluc3RhbmNlfHwoc2Nyb2xsSW5zdGFuY2U9bmV3IExpc3RlbmVyKCdzY3JvbGwnKSksc2Nyb2xsSW5zdGFuY2V9LGdldCByZXNpemUoKXtyZXR1cm4gcmVzaXplSW5zdGFuY2V8fChyZXNpemVJbnN0YW5jZT1uZXcgTGlzdGVuZXIoJ3Jlc2l6ZScpKSxyZXNpemVJbnN0YW5jZX0sdXNlOmZ1bmN0aW9uIHVzZShhKXt2YXIgX3Njcm9sbD10aGlzLnNjcm9sbCxiPV9zY3JvbGwuY3VycixjPV9zY3JvbGwucHJldixfcmVzaXplPXRoaXMucmVzaXplLGQ9X3Jlc2l6ZS5jdXJyLGY9X3Jlc2l6ZS5wcmV2LGc9e2N1cnJZOmIscHJldlk6YyxjdXJyWDpkLHByZXZYOmZ9LGg9dGhpcy5zY3JvbGwudXNlKGZ1bmN0aW9uKF9yZWYsbSl7dmFyIGs9X3JlZi5jdXJyLGw9X3JlZi5wcmV2O2cuY3Vyclk9ayxnLnByZXZZPWwsYShnLG0pfSksaj10aGlzLnJlc2l6ZS51c2UoZnVuY3Rpb24oX3JlZjIsbSl7dmFyIGs9X3JlZjIuY3VycixsPV9yZWYyLnByZXY7Zy5jdXJyWD1rLGcucHJldlg9bCxhKGcsbSl9KTtyZXR1cm57ZGVzdHJveTpmdW5jdGlvbiBkZXN0cm95KCl7cmV0dXJuIGguZGVzdHJveSgpLGouZGVzdHJveSgpLHRoaXN9LHVwZGF0ZTpmdW5jdGlvbiB1cGRhdGUoKXtyZXR1cm4gaC51cGRhdGUoKSxqLnVwZGF0ZSgpLHRoaXN9fX19OyJdfQ==
